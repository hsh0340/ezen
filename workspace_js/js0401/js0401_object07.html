<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>객체를 활용한 입력폼 연습</title>
  <!-- 
    과제1) 학생의 객체를 두가지 방법으로 작성하시오.
    (객체 생성자 함수, 클래스-private, getter/setter)
    - js0331_object05.html 파일 활용
   -->
  <style>
    /* 전체 */
    #container {
      width: 600px;
      margin: 20px auto;
      position: relative;
    }

    /* 입력폼 */
    #inputBox {
      width: 100%;
      height: 400px;
      padding: 10px;
      border: 1px solid black;
    }

    #inputBox h2 {
      text-align: center;
    }

    #inputBox ul {
      margin-top: 50px;
      margin-left: 40px;
      list-style: none;
    }

    #inputBox li {
      width: 80%;
      padding: 10px;
      margin: 10px;
    }

    #inputBox label {
      display: inline-block;
      width: 100px;
    }

    #inputBox #btns {
      margin-top: 50px;
      text-align: center;
    }

    #inputBox input[type="button"],
    #inputBox input[type="reset"] {
      width: 100px;
      height: 32px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      background-color: black;
      color: white;
    }

    #inputBox input[type="button"]:hover,
    #inputBox input[type="reset"]:hover {
      background-color: white;
      color: black;
      border: 2px solid black;
    }

    /* 입력결과 테이블 */
    #tblBox {
      margin-top: 30px;
    }

    #tblBox h3 {
      text-align: center;
    }

    #tblBox table {
      width: 100%;
      border: 1px solid black;
      border-collapse: collapse;
    }

    #tblBox tr {
      height: 35px;
    }

    #tblBox td {
      text-align: center;
    }

    #tblBox th {
      background-color: lightgray;
    }

    #tblBox th,
    #tblBox td {
      border: 1px solid black;
      text-align: center;
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // 1번 방법 - 객체 생성자 함수
      // function Student(name, kor, eng, mat) {
      //   // property
      //   this.name = name
      //   this.kor = kor
      //   this.eng = eng
      //   this.mat = mat
      // }

      // // method를 prototype으로 생성
      // // 총점
      // Student.prototype.getSum = function () {
      //   return this.kor + this.eng + this.mat
      // }

      // // 평균
      // Student.prototype.getAvg = function () {
      //   return this.getSum() / 3
      // }

      // // 학점
      // Student.prototype.getGrade = function () {
      //   let grade
      //   switch (parseInt(this.getAvg() / 10)) {
      //     case 10:
      //     case 9:
      //       grade = "A"
      //       break
      //     case 8:
      //       grade = "B"
      //       break
      //     case 7:
      //       grade = "C"
      //       break
      //     case 6:
      //       grade = "D"
      //       break
      //     default:
      //       grade = "F"
      //   }
      //   return grade
      // }

      // // 정보 출력
      // Student.prototype.showInfo = function () {
      //   return `이름 : ${this.name}, 국어 : ${this.kor}, 영어 : ${this.eng}, 총점 : ${this.getSum()}, 평균 : ${this.getAvg().toFixed(2)}, 학점 : ${this.getGrade()}, `
      // }

      // 2번 방법
      class Student {
        // private property 선언
        #name;
        #kor;
        #eng;
        #mat;

        constructor(name, kor, eng, mat) {
          this.#name = name
          this.#kor = kor
          this.#eng = eng
          this.#mat = mat
        }

        get name() {
          return this.#name
        }

        get kor() {
          return this.#kor
        }

        get eng() {
          return this.#eng
        }

        get mat() {
          return this.#mat
        }

        get sum() {
          return this.#kor + this.#eng + this.#mat
        }

        get avg() {
          return this.sum / 3
        }

        get grade() {
          let grade = ""
          switch (parseInt(this.ave / 10)) {
            case 10:
            case 9:
              grade = "A"
              break
            case 8:
              grade = "B"
              break
            case 7:
              grade = "C"
              break
            case 6:
              grade = "D"
              break
            default:
              grade = "F"
              break
          }
          return grade
        }
      }

      // 객체를 저장할 배열
      let list = []

      let form = document.inputForm
      let btnInput = document.querySelector("#btnInput")
      let tblInput = document.querySelector("#tblInput")

      form.name.focus()

      form.name.addEventListener("keyup", (event) => {
        if (!form.name.value) {
          alert("이름을 입력하십시오!")
          form.name.focus()
          return
        }
      })

      form.kor.addEventListener("keyup", (event) => {
        if (!form.kor.value) {
          alert("국어점수를 입력하십시오!")
          form.kor.focus()
          return
        }
        if (isNaN(Number(form.kor.value))) {
          alert("숫자를 입력하시오!")
          form.kor.value = ""
          form.kor.focus()
          return
        }
        if (Number(kor) < 0 || Number(kor) > 100) {
          alert("0에서 100 사이의 점수를 입력하시오!")
          form.kor.value = ""
          form.kor.focus()
          return
        }
      })

      

      // 버튼 클릭 이벤트
      btnInput.addEventListener("click", () => {
        // 유효성 검사
        if (!form.name.value) {
          alert("이름을 입력하시오!")
          form.name.focus()
          return
        }
        if (!form.kor.value) {
          alert("국어점수를 입력하시오!")
          form.kor.focus()
          return
        }
        if (!form.eng.value) {
          alert("영어점수를 입력하시오!")
          form.eng.focus()
          return
        }
        if (!form.mat.value) {
          alert("수학점수를 입력하시오!")
          form.mat.focus()
          return
        }
      })

      // 입력상자 값을 저장
      let name = form.name.value
      let kor = Number(form.kor.value)
      let eng = Number(form.eng.value)
      let mat = Number(form.mat.value)

      // 객체 생성
      let st = new Student(name, kor, eng, mat)

      // 객체를 배열에 저장
      list.push(st)

      // 객체를 배열에 저장한 후 입력상자 비우기, 이름에 포커스 넣기
      form.name.value = ""
      form.kor.value = ""
      form.eng.value = ""
      form.mat.value = ""
      form.name.focus()

      // 콘솔로 확인
      console.log(list);

      // 결과 테이블 객체의 배열 내용을 추가
      // 1단계) 입력 내용과 메소드 호출 결과를 td를 포함한 문자열 tdTag를 생성
      // let tdTag = `<td>${st.name}</td><td>${st.kor}</td><td>${st.eng}</td><td>${st.mat}</td>`
      // tdTag += `<td>${st.getSum()}</td><td>${st.getAvg()}</td><td>${st.getGrade()}</td>`

      let tdTag = `<td>${st.name}</td><td>${st.kor}</td><td>${st.eng}</td><td>${st.mat}</td>`
      tdTag += `<td>${st.sum}</td><td>${st.avg}</td><td>${st.grade}</td>`


      // 2단계) tr을 생성, tr에 tdTag를 부착

      let trTag = document.createElement("tr")
      trTag.innerHTML = tdTag

      // 3단계) table에 tr을 자식으로 추가
      tblInput.appendChild(trTag)
    })
  </script>
</head>

<body>
  <div id="container">
    <div id="inputBox">
      <form name="inputForm">
        <h2>인덕대학교 성적 입력</h2>
        <ul>
          <li>
            <lable>이름</lable><input type="text" name="name">
          </li>
          <li>
            <lable>국어점수</lable><input type="text" name="kor">
          </li>
          <li>
            <lable>영어점수</lable><input type="text" name="eng">
          </li>
          <li>
            <lable>수학점수</lable><input type="text" name="mat">
          </li>
        </ul>
        <div id="btns">
          <input type="button" value="complete" id="btnInput">&ensp;&ensp;&ensp;
          <input type="reset" value="reset">
        </div>

      </form>
    </div>

    <div id="tblBox">
      <h3>성적 결과</h3>
      <table id="tblInput">
        <tr>
          <th>학생명</th>
          <th>국어</th>
          <th>영어</th>
          <th>수학</th>
          <th>총점</th>
          <th>평균</th>
          <th>학점</th>
        </tr>
      </table>
    </div>
  </div>
</body>

</html>